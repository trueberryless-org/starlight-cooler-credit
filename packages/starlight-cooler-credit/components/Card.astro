---
import { Image } from 'astro:assets';
import HoustonOmg from '../assets/houston_omg.png';
import config from "virtual:starlight-cooler-credit-config";
import getCreditText from '../libs/util';

const translate = (key: string) => Astro.locals.t(key);

const locale = Astro.currentLocale

const src = config.customImage ? config.customImage.default : HoustonOmg;
---

<aside class="not-content">
	<a href={getCreditText(config, "href", translate, locale)}>
		<h2>{getCreditText(config, "title", translate, locale)}</h2>
		<div>
      <div>
        {getCreditText(config, "description", translate, locale) && 
          <p>
            {getCreditText(config, "description", translate, locale)} 
          </p>
        }
      </div>
      {config.showImage && 
        <div>          
          <Image {src} alt="" width="180" />
        </div>
      }
		</div>
	</a>
</aside>

<style>
	aside {
		margin: 1rem 0;
		position: relative;
		background-color: var(--sl-color-gray-6);
		padding: 1rem;
		border-radius: 0.5rem;
		border: 1px solid var(--sl-color-text-accent);
		box-shadow: var(--sl-shadow-md);
		overflow-y: hidden;
	}
	aside a::before {
		content: '';
		position: absolute;
		inset: 0;
		z-index: 1;
	}
	aside > a > div {
		display: flex;
        justify-content: space-between;
		gap: 1rem;
	}
	aside h2 {
		font-size: var(--sl-text-lg) !important;
	}
	aside p {
		font-size: var(--sl-text-sm) !important;
		line-height: normal;
	}
	aside > a > div > div:last-child {
		display: flex;
		align-items: end;
	}
	aside img {
		margin-bottom: -1rem;
		transition: transform 0.3s;
		transform: translateY(2px);
		width: 5.5rem;
		height: auto;
	}

	aside:hover img {
		transform: translateY(0px);
	}
</style>